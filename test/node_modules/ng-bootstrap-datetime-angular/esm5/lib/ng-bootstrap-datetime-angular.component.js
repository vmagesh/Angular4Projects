/**
 * @fileoverview added by tsickle
 * Generated from: lib/ng-bootstrap-datetime-angular.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, forwardRef, ViewChild, Injector } from '@angular/core';
import { NgbPopoverConfig, NgbPopover, NgbDatepicker } from '@ng-bootstrap/ng-bootstrap';
import { NG_VALUE_ACCESSOR, NgControl } from '@angular/forms';
import { DatePipe } from '@angular/common';
import { noop } from 'rxjs';
import * as moment_ from 'moment';
/** @type {?} */
var moment = moment_;
var NgBootstrapDatetimeAngularComponent = /** @class */ (function () {
    function NgBootstrapDatetimeAngularComponent(config, inj) {
        this.config = config;
        this.inj = inj;
        this.inputDatetimeFormat = 'd/M/yyyy H:mm:ss';
        this.placeholder = "";
        this.hourStep = 1;
        this.minuteStep = 15;
        this.secondStep = 30;
        this.seconds = true;
        this.disabled = false;
        this.onTouched = noop;
        this.onChange = noop;
        config.autoClose = 'outside';
        config.placement = 'auto';
    }
    /**
     * @return {?}
     */
    NgBootstrapDatetimeAngularComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        // tslint:disable-next-line: deprecation
        this.ngControl = this.inj.get(NgControl);
    };
    /**
     * @return {?}
     */
    NgBootstrapDatetimeAngularComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
    };
    /**
     * @param {?} newModel
     * @return {?}
     */
    NgBootstrapDatetimeAngularComponent.prototype.writeValue = /**
     * @param {?} newModel
     * @return {?}
     */
    function (newModel) {
        if (newModel) {
            /** @type {?} */
            var myDate = moment(newModel).toDate();
            this.dateStruct = {
                year: myDate.getFullYear(),
                month: myDate.getMonth() + 1,
                day: myDate.getDate()
            };
            this.timeStruct = {
                hour: myDate.getHours(),
                minute: myDate.getMinutes(),
                second: myDate.getSeconds()
            };
            this.setDateStringModel();
        }
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    NgBootstrapDatetimeAngularComponent.prototype.registerOnChange = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this.onChange = fn;
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    NgBootstrapDatetimeAngularComponent.prototype.registerOnTouched = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this.onTouched = fn;
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    NgBootstrapDatetimeAngularComponent.prototype.onInputChange = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) { };
    /**
     * @param {?} event
     * @return {?}
     */
    NgBootstrapDatetimeAngularComponent.prototype.onDateChange = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.setDateStringModel();
    };
    /**
     * @param {?} event
     * @return {?}
     */
    NgBootstrapDatetimeAngularComponent.prototype.onTimeChange = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.setDateStringModel();
    };
    /**
     * @return {?}
     */
    NgBootstrapDatetimeAngularComponent.prototype.setDateStringModel = /**
     * @return {?}
     */
    function () {
        if (!this.timeStruct) {
            /** @type {?} */
            var dateA = new Date();
            this.timeStruct = {
                hour: dateA.getHours(),
                minute: dateA.getMinutes(),
                second: dateA.getSeconds()
            };
        }
        if (this.dateStruct) {
            this.date = new Date(this.dateStruct.year, this.dateStruct.month - 1, this.dateStruct.day, this.timeStruct.hour, this.timeStruct.minute, this.timeStruct.second);
            this.onChange(this.date);
        }
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    NgBootstrapDatetimeAngularComponent.prototype.inputBlur = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        this.onTouched();
    };
    NgBootstrapDatetimeAngularComponent.decorators = [
        { type: Component, args: [{
                    selector: 'ng-bootstrap-datetime-angular',
                    template: "<div class=\"input-group mr-2\">\r\n  <input\r\n    [placeholder]=\"placeholder\"\r\n    [ngClass]=\"ngControl?.valid ? 'ng-valid' : 'ng-invalid'\"\r\n    class=\"form-control\"\r\n    (blur)=\"inputBlur($event)\"\r\n    [ngModel]=\"date | date: inputDatetimeFormat\"\r\n    (change)=\"onInputChange($event)\"\r\n    [disabled]=\"disabled\"\r\n  />\r\n\r\n  <div class=\"input-group-append\">\r\n    <button\r\n      class=\"btn btn-outline-secondary\"\r\n      [ngbPopover]=\"calendarContent\"\r\n      [disabled]=\"disabled\"\r\n      type=\"button\"\r\n    >\r\n      <i class=\"fa fa-calendar\"></i>\r\n    </button>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #calendarContent>\r\n  <div>\r\n    <div>\r\n      <ngb-datepicker\r\n        #dp\r\n        name=\"datepicker\"\r\n        [(ngModel)]=\"dateStruct\"\r\n        (ngModelChange)=\"onDateChange($event)\"\r\n      ></ngb-datepicker>\r\n      <ngb-timepicker\r\n        meridian=\"true\"\r\n        [seconds]=\"false\"\r\n        #tp\r\n        name=\"timepicker\"\r\n        [(ngModel)]=\"timeStruct\"\r\n        (ngModelChange)=\"onTimeChange($event)\"\r\n        [seconds]=\"seconds\"\r\n        [hourStep]=\"hourStep\"\r\n        [minuteStep]=\"minuteStep\"\r\n      ></ngb-timepicker>\r\n    </div>\r\n  </div>\r\n</ng-template>\r\n",
                    providers: [
                        DatePipe,
                        {
                            provide: NG_VALUE_ACCESSOR,
                            useExisting: forwardRef((/**
                             * @return {?}
                             */
                            function () { return NgBootstrapDatetimeAngularComponent; })),
                            multi: true
                        }
                    ]
                }] }
    ];
    /** @nocollapse */
    NgBootstrapDatetimeAngularComponent.ctorParameters = function () { return [
        { type: NgbPopoverConfig },
        { type: Injector }
    ]; };
    NgBootstrapDatetimeAngularComponent.propDecorators = {
        inputDatetimeFormat: [{ type: Input }],
        placeholder: [{ type: Input }],
        hourStep: [{ type: Input }],
        minuteStep: [{ type: Input }],
        secondStep: [{ type: Input }],
        seconds: [{ type: Input }],
        disabled: [{ type: Input }],
        dp: [{ type: ViewChild, args: [NgbDatepicker, null,] }],
        popover: [{ type: ViewChild, args: [NgbPopover, null,] }]
    };
    return NgBootstrapDatetimeAngularComponent;
}());
export { NgBootstrapDatetimeAngularComponent };
if (false) {
    /** @type {?} */
    NgBootstrapDatetimeAngularComponent.prototype.inputDatetimeFormat;
    /** @type {?} */
    NgBootstrapDatetimeAngularComponent.prototype.placeholder;
    /** @type {?} */
    NgBootstrapDatetimeAngularComponent.prototype.hourStep;
    /** @type {?} */
    NgBootstrapDatetimeAngularComponent.prototype.minuteStep;
    /** @type {?} */
    NgBootstrapDatetimeAngularComponent.prototype.secondStep;
    /** @type {?} */
    NgBootstrapDatetimeAngularComponent.prototype.seconds;
    /** @type {?} */
    NgBootstrapDatetimeAngularComponent.prototype.disabled;
    /**
     * @type {?}
     * @private
     */
    NgBootstrapDatetimeAngularComponent.prototype.dp;
    /**
     * @type {?}
     * @private
     */
    NgBootstrapDatetimeAngularComponent.prototype.popover;
    /**
     * @type {?}
     * @private
     */
    NgBootstrapDatetimeAngularComponent.prototype.onTouched;
    /**
     * @type {?}
     * @private
     */
    NgBootstrapDatetimeAngularComponent.prototype.onChange;
    /** @type {?} */
    NgBootstrapDatetimeAngularComponent.prototype.ngControl;
    /** @type {?} */
    NgBootstrapDatetimeAngularComponent.prototype.dateStruct;
    /** @type {?} */
    NgBootstrapDatetimeAngularComponent.prototype.timeStruct;
    /** @type {?} */
    NgBootstrapDatetimeAngularComponent.prototype.date;
    /**
     * @type {?}
     * @private
     */
    NgBootstrapDatetimeAngularComponent.prototype.config;
    /**
     * @type {?}
     * @private
     */
    NgBootstrapDatetimeAngularComponent.prototype.inj;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmctYm9vdHN0cmFwLWRhdGV0aW1lLWFuZ3VsYXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmctYm9vdHN0cmFwLWRhdGV0aW1lLWFuZ3VsYXIvIiwic291cmNlcyI6WyJsaWIvbmctYm9vdHN0cmFwLWRhdGV0aW1lLWFuZ3VsYXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUNMLFNBQVMsRUFFVCxLQUFLLEVBQ0wsVUFBVSxFQUNWLFNBQVMsRUFFVCxRQUFRLEVBQ1QsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUdMLGdCQUFnQixFQUNoQixVQUFVLEVBQ1YsYUFBYSxFQUNkLE1BQU0sNEJBQTRCLENBQUM7QUFDcEMsT0FBTyxFQUNMLGlCQUFpQixFQUVqQixTQUFTLEVBQ1YsTUFBTSxnQkFBZ0IsQ0FBQztBQUN4QixPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDM0MsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUU1QixPQUFPLEtBQUssT0FBTyxNQUFNLFFBQVEsQ0FBQzs7SUFFNUIsTUFBTSxHQUFHLE9BQU87QUFDdEI7SUE4Q0UsNkNBQW9CLE1BQXdCLEVBQVUsR0FBYTtRQUEvQyxXQUFNLEdBQU4sTUFBTSxDQUFrQjtRQUFVLFFBQUcsR0FBSCxHQUFHLENBQVU7UUE5Qm5FLHdCQUFtQixHQUFHLGtCQUFrQixDQUFDO1FBRXpDLGdCQUFXLEdBQVcsRUFBRSxDQUFDO1FBRXpCLGFBQVEsR0FBRyxDQUFDLENBQUM7UUFFYixlQUFVLEdBQUcsRUFBRSxDQUFDO1FBRWhCLGVBQVUsR0FBRyxFQUFFLENBQUM7UUFFaEIsWUFBTyxHQUFHLElBQUksQ0FBQztRQUdmLGFBQVEsR0FBRyxLQUFLLENBQUM7UUFRVCxjQUFTLEdBQWUsSUFBSSxDQUFDO1FBQzdCLGFBQVEsR0FBcUIsSUFBSSxDQUFDO1FBU3hDLE1BQU0sQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO1FBQzdCLE1BQU0sQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFDO0lBQzVCLENBQUM7Ozs7SUFFRCxzREFBUTs7O0lBQVI7UUFDRSx3Q0FBd0M7UUFDeEMsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUMzQyxDQUFDOzs7O0lBRUQsNkRBQWU7OztJQUFmO0lBQ0EsQ0FBQzs7Ozs7SUFFRCx3REFBVTs7OztJQUFWLFVBQVcsUUFBZ0I7UUFDekIsSUFBSSxRQUFRLEVBQUU7O2dCQUNOLE1BQU0sR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsTUFBTSxFQUFFO1lBRXhDLElBQUksQ0FBQyxVQUFVLEdBQUc7Z0JBQ2hCLElBQUksRUFBRSxNQUFNLENBQUMsV0FBVyxFQUFFO2dCQUMxQixLQUFLLEVBQUUsTUFBTSxDQUFDLFFBQVEsRUFBRSxHQUFHLENBQUM7Z0JBQzVCLEdBQUcsRUFBRSxNQUFNLENBQUMsT0FBTyxFQUFFO2FBQ3RCLENBQUM7WUFFRixJQUFJLENBQUMsVUFBVSxHQUFHO2dCQUNoQixJQUFJLEVBQUUsTUFBTSxDQUFDLFFBQVEsRUFBRTtnQkFDdkIsTUFBTSxFQUFFLE1BQU0sQ0FBQyxVQUFVLEVBQUU7Z0JBQzNCLE1BQU0sRUFBRSxNQUFNLENBQUMsVUFBVSxFQUFFO2FBQzVCLENBQUM7WUFFRixJQUFJLENBQUMsa0JBQWtCLEVBQUUsQ0FBQztTQUMzQjtJQUNILENBQUM7Ozs7O0lBRUQsOERBQWdCOzs7O0lBQWhCLFVBQWlCLEVBQU87UUFDdEIsSUFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7SUFDckIsQ0FBQzs7Ozs7SUFFRCwrREFBaUI7Ozs7SUFBakIsVUFBa0IsRUFBTztRQUN2QixJQUFJLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQztJQUN0QixDQUFDOzs7OztJQUVELDJEQUFhOzs7O0lBQWIsVUFBYyxNQUFXLElBQUcsQ0FBQzs7Ozs7SUFFN0IsMERBQVk7Ozs7SUFBWixVQUFhLEtBQW9CO1FBQy9CLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO0lBQzVCLENBQUM7Ozs7O0lBRUQsMERBQVk7Ozs7SUFBWixVQUFhLEtBQW9CO1FBQy9CLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO0lBQzVCLENBQUM7Ozs7SUFFRCxnRUFBa0I7OztJQUFsQjtRQUNFLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFOztnQkFDZCxLQUFLLEdBQUcsSUFBSSxJQUFJLEVBQUU7WUFDeEIsSUFBSSxDQUFDLFVBQVUsR0FBRztnQkFDaEIsSUFBSSxFQUFFLEtBQUssQ0FBQyxRQUFRLEVBQUU7Z0JBQ3RCLE1BQU0sRUFBRSxLQUFLLENBQUMsVUFBVSxFQUFFO2dCQUMxQixNQUFNLEVBQUUsS0FBSyxDQUFDLFVBQVUsRUFBRTthQUMzQixDQUFDO1NBQ0g7UUFFRCxJQUFJLElBQUksQ0FBQyxVQUFVLEVBQUU7WUFDbkIsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksQ0FDbEIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQ3BCLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxHQUFHLENBQUMsRUFDekIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxHQUFHLEVBQ25CLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUNwQixJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sRUFDdEIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQ3ZCLENBQUM7WUFFRixJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUMxQjtJQUNILENBQUM7Ozs7O0lBRUQsdURBQVM7Ozs7SUFBVCxVQUFVLE1BQU07UUFDZCxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7SUFDbkIsQ0FBQzs7Z0JBM0hGLFNBQVMsU0FBQztvQkFDVCxRQUFRLEVBQUUsK0JBQStCO29CQUN6Qyw2eENBQTZEO29CQUU3RCxTQUFTLEVBQUU7d0JBQ1QsUUFBUTt3QkFDUjs0QkFDRSxPQUFPLEVBQUUsaUJBQWlCOzRCQUMxQixXQUFXLEVBQUUsVUFBVTs7OzRCQUFDLGNBQU0sT0FBQSxtQ0FBbUMsRUFBbkMsQ0FBbUMsRUFBQzs0QkFDbEUsS0FBSyxFQUFFLElBQUk7eUJBQ1o7cUJBQ0Y7aUJBQ0Y7Ozs7Z0JBM0JDLGdCQUFnQjtnQkFMaEIsUUFBUTs7O3NDQW1DUCxLQUFLOzhCQUVMLEtBQUs7MkJBRUwsS0FBSzs2QkFFTCxLQUFLOzZCQUVMLEtBQUs7MEJBRUwsS0FBSzsyQkFHTCxLQUFLO3FCQUdMLFNBQVMsU0FBQyxhQUFhLEVBQUUsSUFBSTswQkFHN0IsU0FBUyxTQUFDLFVBQVUsRUFBRSxJQUFJOztJQTJGN0IsMENBQUM7Q0FBQSxBQTdIRCxJQTZIQztTQWhIWSxtQ0FBbUM7OztJQUU5QyxrRUFDeUM7O0lBQ3pDLDBEQUN5Qjs7SUFDekIsdURBQ2E7O0lBQ2IseURBQ2dCOztJQUNoQix5REFDZ0I7O0lBQ2hCLHNEQUNlOztJQUVmLHVEQUNpQjs7Ozs7SUFFakIsaURBQzBCOzs7OztJQUUxQixzREFDNEI7Ozs7O0lBRTVCLHdEQUFxQzs7Ozs7SUFDckMsdURBQTBDOztJQUUxQyx3REFBNEI7O0lBRTVCLHlEQUEwQjs7SUFDMUIseURBQTBCOztJQUMxQixtREFBVzs7Ozs7SUFFQyxxREFBZ0M7Ozs7O0lBQUUsa0RBQXFCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQ29tcG9uZW50LFxuICBPbkluaXQsXG4gIElucHV0LFxuICBmb3J3YXJkUmVmLFxuICBWaWV3Q2hpbGQsXG4gIEFmdGVyVmlld0luaXQsXG4gIEluamVjdG9yXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtcbiAgTmdiVGltZVN0cnVjdCxcbiAgTmdiRGF0ZVN0cnVjdCxcbiAgTmdiUG9wb3ZlckNvbmZpZyxcbiAgTmdiUG9wb3ZlcixcbiAgTmdiRGF0ZXBpY2tlclxufSBmcm9tICdAbmctYm9vdHN0cmFwL25nLWJvb3RzdHJhcCc7XG5pbXBvcnQge1xuICBOR19WQUxVRV9BQ0NFU1NPUixcbiAgQ29udHJvbFZhbHVlQWNjZXNzb3IsXG4gIE5nQ29udHJvbFxufSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBEYXRlUGlwZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBub29wIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBJZlN0bXQgfSBmcm9tICdAYW5ndWxhci9jb21waWxlcic7XG5pbXBvcnQgKiBhcyBtb21lbnRfIGZyb20gJ21vbWVudCc7XG5cbmNvbnN0IG1vbWVudCA9IG1vbWVudF87XG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICduZy1ib290c3RyYXAtZGF0ZXRpbWUtYW5ndWxhcicsXG4gIHRlbXBsYXRlVXJsOiAnLi9uZy1ib290c3RyYXAtZGF0ZXRpbWUtYW5ndWxhci5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlczogW10sXG4gIHByb3ZpZGVyczogW1xuICAgIERhdGVQaXBlLFxuICAgIHtcbiAgICAgIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxuICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gTmdCb290c3RyYXBEYXRldGltZUFuZ3VsYXJDb21wb25lbnQpLFxuICAgICAgbXVsdGk6IHRydWVcbiAgICB9XG4gIF1cbn0pXG5leHBvcnQgY2xhc3MgTmdCb290c3RyYXBEYXRldGltZUFuZ3VsYXJDb21wb25lbnQgIGltcGxlbWVudHMgQ29udHJvbFZhbHVlQWNjZXNzb3IsIE9uSW5pdCwgQWZ0ZXJWaWV3SW5pdCB7XG4gXG4gIEBJbnB1dCgpXG4gIGlucHV0RGF0ZXRpbWVGb3JtYXQgPSAnZC9NL3l5eXkgSDptbTpzcyc7XG4gIEBJbnB1dCgpXG4gIHBsYWNlaG9sZGVyOiBzdHJpbmcgPSBcIlwiO1xuICBASW5wdXQoKVxuICBob3VyU3RlcCA9IDE7XG4gIEBJbnB1dCgpXG4gIG1pbnV0ZVN0ZXAgPSAxNTtcbiAgQElucHV0KClcbiAgc2Vjb25kU3RlcCA9IDMwO1xuICBASW5wdXQoKVxuICBzZWNvbmRzID0gdHJ1ZTtcblxuICBASW5wdXQoKVxuICBkaXNhYmxlZCA9IGZhbHNlO1xuXG4gIEBWaWV3Q2hpbGQoTmdiRGF0ZXBpY2tlciwgbnVsbClcbiAgcHJpdmF0ZSBkcDogTmdiRGF0ZXBpY2tlcjtcblxuICBAVmlld0NoaWxkKE5nYlBvcG92ZXIsIG51bGwpXG4gIHByaXZhdGUgcG9wb3ZlcjogTmdiUG9wb3ZlcjtcblxuICBwcml2YXRlIG9uVG91Y2hlZDogKCkgPT4gdm9pZCA9IG5vb3A7XG4gIHByaXZhdGUgb25DaGFuZ2U6IChfOiBhbnkpID0+IHZvaWQgPSBub29wO1xuXG4gIHB1YmxpYyBuZ0NvbnRyb2w6IE5nQ29udHJvbDtcblxuICBkYXRlU3RydWN0OiBOZ2JEYXRlU3RydWN0O1xuICB0aW1lU3RydWN0OiBOZ2JUaW1lU3RydWN0O1xuICBkYXRlOiBEYXRlO1xuICBcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBjb25maWc6IE5nYlBvcG92ZXJDb25maWcsIHByaXZhdGUgaW5qOiBJbmplY3Rvcikge1xuICAgIGNvbmZpZy5hdXRvQ2xvc2UgPSAnb3V0c2lkZSc7XG4gICAgY29uZmlnLnBsYWNlbWVudCA9ICdhdXRvJztcbiAgfVxuXG4gIG5nT25Jbml0KCk6IHZvaWQge1xuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogZGVwcmVjYXRpb25cbiAgICB0aGlzLm5nQ29udHJvbCA9IHRoaXMuaW5qLmdldChOZ0NvbnRyb2wpO1xuICB9XG5cbiAgbmdBZnRlclZpZXdJbml0KCk6IHZvaWQge1xuICB9XG5cbiAgd3JpdGVWYWx1ZShuZXdNb2RlbDogc3RyaW5nKSB7XG4gICAgaWYgKG5ld01vZGVsKSB7XG4gICAgICBjb25zdCBteURhdGUgPSBtb21lbnQobmV3TW9kZWwpLnRvRGF0ZSgpO1xuXG4gICAgICB0aGlzLmRhdGVTdHJ1Y3QgPSB7XG4gICAgICAgIHllYXI6IG15RGF0ZS5nZXRGdWxsWWVhcigpLFxuICAgICAgICBtb250aDogbXlEYXRlLmdldE1vbnRoKCkgKyAxLFxuICAgICAgICBkYXk6IG15RGF0ZS5nZXREYXRlKClcbiAgICAgIH07XG5cbiAgICAgIHRoaXMudGltZVN0cnVjdCA9IHtcbiAgICAgICAgaG91cjogbXlEYXRlLmdldEhvdXJzKCksXG4gICAgICAgIG1pbnV0ZTogbXlEYXRlLmdldE1pbnV0ZXMoKSxcbiAgICAgICAgc2Vjb25kOiBteURhdGUuZ2V0U2Vjb25kcygpXG4gICAgICB9O1xuXG4gICAgICB0aGlzLnNldERhdGVTdHJpbmdNb2RlbCgpO1xuICAgIH1cbiAgfVxuXG4gIHJlZ2lzdGVyT25DaGFuZ2UoZm46IGFueSk6IHZvaWQge1xuICAgIHRoaXMub25DaGFuZ2UgPSBmbjtcbiAgfVxuXG4gIHJlZ2lzdGVyT25Ub3VjaGVkKGZuOiBhbnkpOiB2b2lkIHtcbiAgICB0aGlzLm9uVG91Y2hlZCA9IGZuO1xuICB9XG5cbiAgb25JbnB1dENoYW5nZSgkZXZlbnQ6IGFueSkge31cblxuICBvbkRhdGVDaGFuZ2UoZXZlbnQ6IE5nYkRhdGVTdHJ1Y3QpIHtcbiAgICB0aGlzLnNldERhdGVTdHJpbmdNb2RlbCgpO1xuICB9XG5cbiAgb25UaW1lQ2hhbmdlKGV2ZW50OiBOZ2JUaW1lU3RydWN0KSB7XG4gICAgdGhpcy5zZXREYXRlU3RyaW5nTW9kZWwoKTtcbiAgfVxuXG4gIHNldERhdGVTdHJpbmdNb2RlbCgpIHtcbiAgICBpZiAoIXRoaXMudGltZVN0cnVjdCkge1xuICAgICAgY29uc3QgZGF0ZUEgPSBuZXcgRGF0ZSgpO1xuICAgICAgdGhpcy50aW1lU3RydWN0ID0ge1xuICAgICAgICBob3VyOiBkYXRlQS5nZXRIb3VycygpLFxuICAgICAgICBtaW51dGU6IGRhdGVBLmdldE1pbnV0ZXMoKSxcbiAgICAgICAgc2Vjb25kOiBkYXRlQS5nZXRTZWNvbmRzKClcbiAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGF0ZVN0cnVjdCkge1xuICAgICAgdGhpcy5kYXRlID0gbmV3IERhdGUoXG4gICAgICAgIHRoaXMuZGF0ZVN0cnVjdC55ZWFyLFxuICAgICAgICB0aGlzLmRhdGVTdHJ1Y3QubW9udGggLSAxLFxuICAgICAgICB0aGlzLmRhdGVTdHJ1Y3QuZGF5LFxuICAgICAgICB0aGlzLnRpbWVTdHJ1Y3QuaG91cixcbiAgICAgICAgdGhpcy50aW1lU3RydWN0Lm1pbnV0ZSxcbiAgICAgICAgdGhpcy50aW1lU3RydWN0LnNlY29uZFxuICAgICAgKTtcblxuICAgICAgdGhpcy5vbkNoYW5nZSh0aGlzLmRhdGUpO1xuICAgIH1cbiAgfVxuXG4gIGlucHV0Qmx1cigkZXZlbnQpIHtcbiAgICB0aGlzLm9uVG91Y2hlZCgpO1xuICB9XG5cbn1cbiJdfQ==