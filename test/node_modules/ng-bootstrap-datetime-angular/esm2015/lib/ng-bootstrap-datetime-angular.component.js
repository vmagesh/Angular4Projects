/**
 * @fileoverview added by tsickle
 * Generated from: lib/ng-bootstrap-datetime-angular.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, forwardRef, ViewChild, Injector } from '@angular/core';
import { NgbPopoverConfig, NgbPopover, NgbDatepicker } from '@ng-bootstrap/ng-bootstrap';
import { NG_VALUE_ACCESSOR, NgControl } from '@angular/forms';
import { DatePipe } from '@angular/common';
import { noop } from 'rxjs';
import * as moment_ from 'moment';
/** @type {?} */
const moment = moment_;
export class NgBootstrapDatetimeAngularComponent {
    /**
     * @param {?} config
     * @param {?} inj
     */
    constructor(config, inj) {
        this.config = config;
        this.inj = inj;
        this.inputDatetimeFormat = 'd/M/yyyy H:mm:ss';
        this.placeholder = "";
        this.hourStep = 1;
        this.minuteStep = 15;
        this.secondStep = 30;
        this.seconds = true;
        this.disabled = false;
        this.onTouched = noop;
        this.onChange = noop;
        config.autoClose = 'outside';
        config.placement = 'auto';
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        // tslint:disable-next-line: deprecation
        this.ngControl = this.inj.get(NgControl);
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
    }
    /**
     * @param {?} newModel
     * @return {?}
     */
    writeValue(newModel) {
        if (newModel) {
            /** @type {?} */
            const myDate = moment(newModel).toDate();
            this.dateStruct = {
                year: myDate.getFullYear(),
                month: myDate.getMonth() + 1,
                day: myDate.getDate()
            };
            this.timeStruct = {
                hour: myDate.getHours(),
                minute: myDate.getMinutes(),
                second: myDate.getSeconds()
            };
            this.setDateStringModel();
        }
    }
    /**
     * @param {?} fn
     * @return {?}
     */
    registerOnChange(fn) {
        this.onChange = fn;
    }
    /**
     * @param {?} fn
     * @return {?}
     */
    registerOnTouched(fn) {
        this.onTouched = fn;
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onInputChange($event) { }
    /**
     * @param {?} event
     * @return {?}
     */
    onDateChange(event) {
        this.setDateStringModel();
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onTimeChange(event) {
        this.setDateStringModel();
    }
    /**
     * @return {?}
     */
    setDateStringModel() {
        if (!this.timeStruct) {
            /** @type {?} */
            const dateA = new Date();
            this.timeStruct = {
                hour: dateA.getHours(),
                minute: dateA.getMinutes(),
                second: dateA.getSeconds()
            };
        }
        if (this.dateStruct) {
            this.date = new Date(this.dateStruct.year, this.dateStruct.month - 1, this.dateStruct.day, this.timeStruct.hour, this.timeStruct.minute, this.timeStruct.second);
            this.onChange(this.date);
        }
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    inputBlur($event) {
        this.onTouched();
    }
}
NgBootstrapDatetimeAngularComponent.decorators = [
    { type: Component, args: [{
                selector: 'ng-bootstrap-datetime-angular',
                template: "<div class=\"input-group mr-2\">\r\n  <input\r\n    [placeholder]=\"placeholder\"\r\n    [ngClass]=\"ngControl?.valid ? 'ng-valid' : 'ng-invalid'\"\r\n    class=\"form-control\"\r\n    (blur)=\"inputBlur($event)\"\r\n    [ngModel]=\"date | date: inputDatetimeFormat\"\r\n    (change)=\"onInputChange($event)\"\r\n    [disabled]=\"disabled\"\r\n  />\r\n\r\n  <div class=\"input-group-append\">\r\n    <button\r\n      class=\"btn btn-outline-secondary\"\r\n      [ngbPopover]=\"calendarContent\"\r\n      [disabled]=\"disabled\"\r\n      type=\"button\"\r\n    >\r\n      <i class=\"fa fa-calendar\"></i>\r\n    </button>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #calendarContent>\r\n  <div>\r\n    <div>\r\n      <ngb-datepicker\r\n        #dp\r\n        name=\"datepicker\"\r\n        [(ngModel)]=\"dateStruct\"\r\n        (ngModelChange)=\"onDateChange($event)\"\r\n      ></ngb-datepicker>\r\n      <ngb-timepicker\r\n        meridian=\"true\"\r\n        [seconds]=\"false\"\r\n        #tp\r\n        name=\"timepicker\"\r\n        [(ngModel)]=\"timeStruct\"\r\n        (ngModelChange)=\"onTimeChange($event)\"\r\n        [seconds]=\"seconds\"\r\n        [hourStep]=\"hourStep\"\r\n        [minuteStep]=\"minuteStep\"\r\n      ></ngb-timepicker>\r\n    </div>\r\n  </div>\r\n</ng-template>\r\n",
                providers: [
                    DatePipe,
                    {
                        provide: NG_VALUE_ACCESSOR,
                        useExisting: forwardRef((/**
                         * @return {?}
                         */
                        () => NgBootstrapDatetimeAngularComponent)),
                        multi: true
                    }
                ]
            }] }
];
/** @nocollapse */
NgBootstrapDatetimeAngularComponent.ctorParameters = () => [
    { type: NgbPopoverConfig },
    { type: Injector }
];
NgBootstrapDatetimeAngularComponent.propDecorators = {
    inputDatetimeFormat: [{ type: Input }],
    placeholder: [{ type: Input }],
    hourStep: [{ type: Input }],
    minuteStep: [{ type: Input }],
    secondStep: [{ type: Input }],
    seconds: [{ type: Input }],
    disabled: [{ type: Input }],
    dp: [{ type: ViewChild, args: [NgbDatepicker, null,] }],
    popover: [{ type: ViewChild, args: [NgbPopover, null,] }]
};
if (false) {
    /** @type {?} */
    NgBootstrapDatetimeAngularComponent.prototype.inputDatetimeFormat;
    /** @type {?} */
    NgBootstrapDatetimeAngularComponent.prototype.placeholder;
    /** @type {?} */
    NgBootstrapDatetimeAngularComponent.prototype.hourStep;
    /** @type {?} */
    NgBootstrapDatetimeAngularComponent.prototype.minuteStep;
    /** @type {?} */
    NgBootstrapDatetimeAngularComponent.prototype.secondStep;
    /** @type {?} */
    NgBootstrapDatetimeAngularComponent.prototype.seconds;
    /** @type {?} */
    NgBootstrapDatetimeAngularComponent.prototype.disabled;
    /**
     * @type {?}
     * @private
     */
    NgBootstrapDatetimeAngularComponent.prototype.dp;
    /**
     * @type {?}
     * @private
     */
    NgBootstrapDatetimeAngularComponent.prototype.popover;
    /**
     * @type {?}
     * @private
     */
    NgBootstrapDatetimeAngularComponent.prototype.onTouched;
    /**
     * @type {?}
     * @private
     */
    NgBootstrapDatetimeAngularComponent.prototype.onChange;
    /** @type {?} */
    NgBootstrapDatetimeAngularComponent.prototype.ngControl;
    /** @type {?} */
    NgBootstrapDatetimeAngularComponent.prototype.dateStruct;
    /** @type {?} */
    NgBootstrapDatetimeAngularComponent.prototype.timeStruct;
    /** @type {?} */
    NgBootstrapDatetimeAngularComponent.prototype.date;
    /**
     * @type {?}
     * @private
     */
    NgBootstrapDatetimeAngularComponent.prototype.config;
    /**
     * @type {?}
     * @private
     */
    NgBootstrapDatetimeAngularComponent.prototype.inj;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmctYm9vdHN0cmFwLWRhdGV0aW1lLWFuZ3VsYXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmctYm9vdHN0cmFwLWRhdGV0aW1lLWFuZ3VsYXIvIiwic291cmNlcyI6WyJsaWIvbmctYm9vdHN0cmFwLWRhdGV0aW1lLWFuZ3VsYXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUNMLFNBQVMsRUFFVCxLQUFLLEVBQ0wsVUFBVSxFQUNWLFNBQVMsRUFFVCxRQUFRLEVBQ1QsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUdMLGdCQUFnQixFQUNoQixVQUFVLEVBQ1YsYUFBYSxFQUNkLE1BQU0sNEJBQTRCLENBQUM7QUFDcEMsT0FBTyxFQUNMLGlCQUFpQixFQUVqQixTQUFTLEVBQ1YsTUFBTSxnQkFBZ0IsQ0FBQztBQUN4QixPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDM0MsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUU1QixPQUFPLEtBQUssT0FBTyxNQUFNLFFBQVEsQ0FBQzs7TUFFNUIsTUFBTSxHQUFHLE9BQU87QUFjdEIsTUFBTSxPQUFPLG1DQUFtQzs7Ozs7SUFpQzlDLFlBQW9CLE1BQXdCLEVBQVUsR0FBYTtRQUEvQyxXQUFNLEdBQU4sTUFBTSxDQUFrQjtRQUFVLFFBQUcsR0FBSCxHQUFHLENBQVU7UUE5Qm5FLHdCQUFtQixHQUFHLGtCQUFrQixDQUFDO1FBRXpDLGdCQUFXLEdBQVcsRUFBRSxDQUFDO1FBRXpCLGFBQVEsR0FBRyxDQUFDLENBQUM7UUFFYixlQUFVLEdBQUcsRUFBRSxDQUFDO1FBRWhCLGVBQVUsR0FBRyxFQUFFLENBQUM7UUFFaEIsWUFBTyxHQUFHLElBQUksQ0FBQztRQUdmLGFBQVEsR0FBRyxLQUFLLENBQUM7UUFRVCxjQUFTLEdBQWUsSUFBSSxDQUFDO1FBQzdCLGFBQVEsR0FBcUIsSUFBSSxDQUFDO1FBU3hD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RUFBRSxJQUFJO3FCQUNaO2lCQUNGO2FBQ0Y7Ozs7WUEzQkMsZ0JBQWdCO1lBTGhCLFFBQVE7OztrQ0FtQ1AsS0FBSzswQkFFTCxLQUFLO3VCQUVMLEtBQUs7eUJBRUwsS0FBSzt5QkFFTCxLQUFLO3NCQUVMLEtBQUs7dUJBR0wsS0FBSztpQkFHTCxTQUFTLFNBQUMsYUFBYSxFQUFFLElBQUk7c0JBRzdCLFNBQVMsU0FBQyxVQUFVLEVBQUUsSUFBSTs7OztJQW5CM0Isa0VBQ3lDOztJQUN6QywwREFDeUI7O0lBQ3pCLHVEQUNhOztJQUNiLHlEQUNnQjs7SUFDaEIseURBQ2dCOztJQUNoQixzREFDZTs7SUFFZix1REFDaUI7Ozs7O0lBRWpCLGlEQUMwQjs7Ozs7SUFFMUIsc0RBQzRCOzs7OztJQUU1Qix3REFBcUM7Ozs7O0lBQ3JDLHVEQUEwQzs7SUFFMUMsd0RBQTRCOztJQUU1Qix5REFBMEI7O0lBQzFCLHlEQUEwQjs7SUFDMUIsbURBQVc7Ozs7O0lBRUMscURBQWdDOzs7OztJQUFFLGtEQUFxQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIENvbXBvbmVudCxcbiAgT25Jbml0LFxuICBJbnB1dCxcbiAgZm9yd2FyZFJlZixcbiAgVmlld0NoaWxkLFxuICBBZnRlclZpZXdJbml0LFxuICBJbmplY3RvclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7XG4gIE5nYlRpbWVTdHJ1Y3QsXG4gIE5nYkRhdGVTdHJ1Y3QsXG4gIE5nYlBvcG92ZXJDb25maWcsXG4gIE5nYlBvcG92ZXIsXG4gIE5nYkRhdGVwaWNrZXJcbn0gZnJvbSAnQG5nLWJvb3RzdHJhcC9uZy1ib290c3RyYXAnO1xuaW1wb3J0IHtcbiAgTkdfVkFMVUVfQUNDRVNTT1IsXG4gIENvbnRyb2xWYWx1ZUFjY2Vzc29yLFxuICBOZ0NvbnRyb2xcbn0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgRGF0ZVBpcGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgbm9vcCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgSWZTdG10IH0gZnJvbSAnQGFuZ3VsYXIvY29tcGlsZXInO1xuaW1wb3J0ICogYXMgbW9tZW50XyBmcm9tICdtb21lbnQnO1xuXG5jb25zdCBtb21lbnQgPSBtb21lbnRfO1xuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnbmctYm9vdHN0cmFwLWRhdGV0aW1lLWFuZ3VsYXInLFxuICB0ZW1wbGF0ZVVybDogJy4vbmctYm9vdHN0cmFwLWRhdGV0aW1lLWFuZ3VsYXIuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZXM6IFtdLFxuICBwcm92aWRlcnM6IFtcbiAgICBEYXRlUGlwZSxcbiAgICB7XG4gICAgICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcbiAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IE5nQm9vdHN0cmFwRGF0ZXRpbWVBbmd1bGFyQ29tcG9uZW50KSxcbiAgICAgIG11bHRpOiB0cnVlXG4gICAgfVxuICBdXG59KVxuZXhwb3J0IGNsYXNzIE5nQm9vdHN0cmFwRGF0ZXRpbWVBbmd1bGFyQ29tcG9uZW50ICBpbXBsZW1lbnRzIENvbnRyb2xWYWx1ZUFjY2Vzc29yLCBPbkluaXQsIEFmdGVyVmlld0luaXQge1xuIFxuICBASW5wdXQoKVxuICBpbnB1dERhdGV0aW1lRm9ybWF0ID0gJ2QvTS95eXl5IEg6bW06c3MnO1xuICBASW5wdXQoKVxuICBwbGFjZWhvbGRlcjogc3RyaW5nID0gXCJcIjtcbiAgQElucHV0KClcbiAgaG91clN0ZXAgPSAxO1xuICBASW5wdXQoKVxuICBtaW51dGVTdGVwID0gMTU7XG4gIEBJbnB1dCgpXG4gIHNlY29uZFN0ZXAgPSAzMDtcbiAgQElucHV0KClcbiAgc2Vjb25kcyA9IHRydWU7XG5cbiAgQElucHV0KClcbiAgZGlzYWJsZWQgPSBmYWxzZTtcblxuICBAVmlld0NoaWxkKE5nYkRhdGVwaWNrZXIsIG51bGwpXG4gIHByaXZhdGUgZHA6IE5nYkRhdGVwaWNrZXI7XG5cbiAgQFZpZXdDaGlsZChOZ2JQb3BvdmVyLCBudWxsKVxuICBwcml2YXRlIHBvcG92ZXI6IE5nYlBvcG92ZXI7XG5cbiAgcHJpdmF0ZSBvblRvdWNoZWQ6ICgpID0+IHZvaWQgPSBub29wO1xuICBwcml2YXRlIG9uQ2hhbmdlOiAoXzogYW55KSA9PiB2b2lkID0gbm9vcDtcblxuICBwdWJsaWMgbmdDb250cm9sOiBOZ0NvbnRyb2w7XG5cbiAgZGF0ZVN0cnVjdDogTmdiRGF0ZVN0cnVjdDtcbiAgdGltZVN0cnVjdDogTmdiVGltZVN0cnVjdDtcbiAgZGF0ZTogRGF0ZTtcbiAgXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgY29uZmlnOiBOZ2JQb3BvdmVyQ29uZmlnLCBwcml2YXRlIGluajogSW5qZWN0b3IpIHtcbiAgICBjb25maWcuYXV0b0Nsb3NlID0gJ291dHNpZGUnO1xuICAgIGNvbmZpZy5wbGFjZW1lbnQgPSAnYXV0byc7XG4gIH1cblxuICBuZ09uSW5pdCgpOiB2b2lkIHtcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IGRlcHJlY2F0aW9uXG4gICAgdGhpcy5uZ0NvbnRyb2wgPSB0aGlzLmluai5nZXQoTmdDb250cm9sKTtcbiAgfVxuXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpOiB2b2lkIHtcbiAgfVxuXG4gIHdyaXRlVmFsdWUobmV3TW9kZWw6IHN0cmluZykge1xuICAgIGlmIChuZXdNb2RlbCkge1xuICAgICAgY29uc3QgbXlEYXRlID0gbW9tZW50KG5ld01vZGVsKS50b0RhdGUoKTtcblxuICAgICAgdGhpcy5kYXRlU3RydWN0ID0ge1xuICAgICAgICB5ZWFyOiBteURhdGUuZ2V0RnVsbFllYXIoKSxcbiAgICAgICAgbW9udGg6IG15RGF0ZS5nZXRNb250aCgpICsgMSxcbiAgICAgICAgZGF5OiBteURhdGUuZ2V0RGF0ZSgpXG4gICAgICB9O1xuXG4gICAgICB0aGlzLnRpbWVTdHJ1Y3QgPSB7XG4gICAgICAgIGhvdXI6IG15RGF0ZS5nZXRIb3VycygpLFxuICAgICAgICBtaW51dGU6IG15RGF0ZS5nZXRNaW51dGVzKCksXG4gICAgICAgIHNlY29uZDogbXlEYXRlLmdldFNlY29uZHMoKVxuICAgICAgfTtcblxuICAgICAgdGhpcy5zZXREYXRlU3RyaW5nTW9kZWwoKTtcbiAgICB9XG4gIH1cblxuICByZWdpc3Rlck9uQ2hhbmdlKGZuOiBhbnkpOiB2b2lkIHtcbiAgICB0aGlzLm9uQ2hhbmdlID0gZm47XG4gIH1cblxuICByZWdpc3Rlck9uVG91Y2hlZChmbjogYW55KTogdm9pZCB7XG4gICAgdGhpcy5vblRvdWNoZWQgPSBmbjtcbiAgfVxuXG4gIG9uSW5wdXRDaGFuZ2UoJGV2ZW50OiBhbnkpIHt9XG5cbiAgb25EYXRlQ2hhbmdlKGV2ZW50OiBOZ2JEYXRlU3RydWN0KSB7XG4gICAgdGhpcy5zZXREYXRlU3RyaW5nTW9kZWwoKTtcbiAgfVxuXG4gIG9uVGltZUNoYW5nZShldmVudDogTmdiVGltZVN0cnVjdCkge1xuICAgIHRoaXMuc2V0RGF0ZVN0cmluZ01vZGVsKCk7XG4gIH1cblxuICBzZXREYXRlU3RyaW5nTW9kZWwoKSB7XG4gICAgaWYgKCF0aGlzLnRpbWVTdHJ1Y3QpIHtcbiAgICAgIGNvbnN0IGRhdGVBID0gbmV3IERhdGUoKTtcbiAgICAgIHRoaXMudGltZVN0cnVjdCA9IHtcbiAgICAgICAgaG91cjogZGF0ZUEuZ2V0SG91cnMoKSxcbiAgICAgICAgbWludXRlOiBkYXRlQS5nZXRNaW51dGVzKCksXG4gICAgICAgIHNlY29uZDogZGF0ZUEuZ2V0U2Vjb25kcygpXG4gICAgICB9O1xuICAgIH1cblxuICAgIGlmICh0aGlzLmRhdGVTdHJ1Y3QpIHtcbiAgICAgIHRoaXMuZGF0ZSA9IG5ldyBEYXRlKFxuICAgICAgICB0aGlzLmRhdGVTdHJ1Y3QueWVhcixcbiAgICAgICAgdGhpcy5kYXRlU3RydWN0Lm1vbnRoIC0gMSxcbiAgICAgICAgdGhpcy5kYXRlU3RydWN0LmRheSxcbiAgICAgICAgdGhpcy50aW1lU3RydWN0LmhvdXIsXG4gICAgICAgIHRoaXMudGltZVN0cnVjdC5taW51dGUsXG4gICAgICAgIHRoaXMudGltZVN0cnVjdC5zZWNvbmRcbiAgICAgICk7XG5cbiAgICAgIHRoaXMub25DaGFuZ2UodGhpcy5kYXRlKTtcbiAgICB9XG4gIH1cblxuICBpbnB1dEJsdXIoJGV2ZW50KSB7XG4gICAgdGhpcy5vblRvdWNoZWQoKTtcbiAgfVxuXG59XG4iXX0=